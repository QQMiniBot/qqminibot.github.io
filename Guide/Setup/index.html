<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>项目搭建 | QQMini.PluginSDK</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="QQMini.PluginSDK 开发文档">
    
    <link rel="preload" href="/assets/css/0.styles.443403f7.css" as="style"><link rel="preload" href="/assets/js/app.73746a0f.js" as="script"><link rel="preload" href="/assets/js/2.36068e29.js" as="script"><link rel="preload" href="/assets/js/15.ba7e2a48.js" as="script"><link rel="prefetch" href="/assets/js/10.2eeecffb.js"><link rel="prefetch" href="/assets/js/11.10f1e00b.js"><link rel="prefetch" href="/assets/js/12.3d5b35ad.js"><link rel="prefetch" href="/assets/js/13.b83c4d13.js"><link rel="prefetch" href="/assets/js/14.91771d28.js"><link rel="prefetch" href="/assets/js/16.ee45f865.js"><link rel="prefetch" href="/assets/js/17.bc11b659.js"><link rel="prefetch" href="/assets/js/18.ce9ceae7.js"><link rel="prefetch" href="/assets/js/3.4f0c4de7.js"><link rel="prefetch" href="/assets/js/4.b9f699bc.js"><link rel="prefetch" href="/assets/js/5.0f2cc9a3.js"><link rel="prefetch" href="/assets/js/6.4723672f.js"><link rel="prefetch" href="/assets/js/7.c01443bf.js"><link rel="prefetch" href="/assets/js/8.d3d9278c.js"><link rel="prefetch" href="/assets/js/9.54960dae.js">
    <link rel="stylesheet" href="/assets/css/0.styles.443403f7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="QQMini.PluginSDK" class="logo"> <span class="site-name can-hide">QQMini.PluginSDK</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/Guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="/API/" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/Event/" class="nav-link">
  事件
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/Guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="/API/" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/Event/" class="nav-link">
  事件
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Guide/" aria-current="page" class="sidebar-link">简介</a></li><li><a href="/Guide/Require/" class="sidebar-link">环境要求</a></li><li><a href="/Guide/Setup/" aria-current="page" class="active sidebar-link">项目搭建</a></li><li><a href="/Guide/Code/" class="sidebar-link">插件编写</a></li><li><a href="/Guide/Deploy/" class="sidebar-link">插件部署</a></li><li><a href="/Guide/AddWindow/" class="sidebar-link">添加窗体</a></li><li><a href="/Guide/Update/" class="sidebar-link">升级版本</a></li><li><a href="/Guide/Debug/" class="sidebar-link">插件调试</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="项目搭建"><a href="#项目搭建" class="header-anchor">#</a> 项目搭建</h1> <p>本章节将叙述如何创建一个 QQMini插件</p> <h2 id="插件信息"><a href="#插件信息" class="header-anchor">#</a> 插件信息</h2> <p>在 QQMini插件 的V3机制中，我们采用了更完善的插件信息结构，用于插件区分、授权、开发者信息绑定以及插件商城(未来)。具体的插件信息模型见 <a href="">插件模型</a></p> <table><thead><tr><th>名称</th> <th style="text-align:center;">类型</th> <th style="text-align:left;">注释</th></tr></thead> <tbody><tr><td>PackageID</td> <td style="text-align:center;">String</td> <td style="text-align:left;">插件包ID，作为框架区分插件的唯一标识。应使用域名反写作为包ID。例: com.jiegg.demo</td></tr> <tr><td>Name</td> <td style="text-align:center;">String</td> <td style="text-align:left;">插件包ID，作为框架区分插件的唯一标识</td></tr> <tr><td>Version</td> <td style="text-align:center;">Version</td> <td style="text-align:left;">插件版本，插件的唯一版本号，格式: 主板本号.次版本号.编译版本号.修订号</td></tr> <tr><td>Author</td> <td style="text-align:center;">String</td> <td style="text-align:left;">插件作者，作为显示在框架中插件作者的名字</td></tr> <tr><td>Description</td> <td style="text-align:center;">String</td> <td style="text-align:left;">插件说明，请写上插件的简要说明</td></tr> <tr><td>SDKVersion</td> <td style="text-align:center;">Int32</td> <td style="text-align:left;">SDK版本，用于切换插件在框架中的运行机制</td></tr> <tr><td>DeveloperKey</td> <td style="text-align:center;">String</td> <td style="text-align:left;">开发人员序列号。该序列号会影响到插件部分Api或事件的使用。请勿随意修改，错误的序列号将导致插件被拒绝载入</td></tr></tbody></table> <h2 id="步骤"><a href="#步骤" class="header-anchor">#</a> 步骤</h2> <p>1.确定自己的插件的 PackageID，例如: com.jiegg.demo</p> <p>2.打开 Visual Studio 创建类库项目</p> <p>请搜索 “类库” 项目，并选择 类库(.NET Framework) 的项目进行创建
<img src="/setup/createProject01.png" alt="">
3.输入插件的 PackageID</p> <p>修改项目名称为你的 PackageID。</p> <p>注意： 如果项目名称与 PackageID 不一致，可能会导致编译结果无法被正常加载。
<img src="/setup/createProject02.png" alt="">
4.打开项目的 NuGet 管理</p> <p>打开菜单 “工具” -&gt; “NuGet包管理器” -&gt; &quot;管理解决方案的 NuGet 程序包&quot;，打开之后勾选 “包括预发行版本”，在搜索框内搜索 “QQMini.PluginSDK”。选中之后将其安装到项目中
<img src="/setup/openNuGet.png" alt="">
5.配置 x86 生成模式</p> <p>安装完NuGet程序包后，Visual Studio 可能会提示架构不匹配的警告信息，此时我们打开配置管理器，将项目的生成类型从 AnyCPU 改为 x86 即可消除该警告
<img src="/setup/openConfigManager.png" alt=""> <img src="/setup/changePlatform.png" alt=""></p> <p>6.打开 Class1.cs 修改成如下图代码来继承 PluginBase 类</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">QQMini<span class="token punctuation">.</span>PluginSDK<span class="token punctuation">.</span>Core</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">QQMini<span class="token punctuation">.</span>PluginSDK<span class="token punctuation">.</span>Core<span class="token punctuation">.</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">com<span class="token punctuation">.</span>jiegg<span class="token punctuation">.</span>demo</span>
<span class="token punctuation">{</span>
     <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Class1</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PluginBase</span></span>
     <span class="token punctuation">{</span>

     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><details><summary>VB.NET</summary> <div class="language-vbnet extra-class"><pre class="language-vbnet"><code><span class="token keyword">Imports</span> QQMini.PluginSDK.Core
<span class="token keyword">Imports</span> QQMini.PluginSDK.Core.Model

<span class="token keyword">Public</span> <span class="token keyword">Class</span> Class1
     <span class="token keyword">Inherits</span> PluginBase


<span class="token keyword">End</span> <span class="token keyword">Class</span>
</code></pre></div></details> <p>7.使用 override 关键字重写 PluginInfo 属性并填写插件信息。有关插件信息的内容请到 <a href="">插件信息</a>。</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">PluginInfo</span> PluginInfo
 <span class="token punctuation">{</span>
 	<span class="token keyword">get</span>
 	<span class="token punctuation">{</span>
 		<span class="token class-name">PluginInfo</span> info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PluginInfo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		info<span class="token punctuation">.</span>PackageId <span class="token operator">=</span> <span class="token string">&quot;com.jiegg.demo&quot;</span><span class="token punctuation">;</span>
 		info<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;复读机&quot;</span><span class="token punctuation">;</span>
 		info<span class="token punctuation">.</span>Version <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Version</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		info<span class="token punctuation">.</span>Author <span class="token operator">=</span> <span class="token string">&quot;JieGG&quot;</span><span class="token punctuation">;</span>
 		info<span class="token punctuation">.</span>Description <span class="token operator">=</span> <span class="token string">&quot;QQMini插件教程插件 (V3 插件机制)&quot;</span><span class="token punctuation">;</span>
 		<span class="token keyword">return</span> info<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div><details><summary>VB.NET</summary> <div class="language-vbnet extra-class"><pre class="language-vbnet"><code><span class="token keyword">Public</span> <span class="token keyword">Overrides</span> <span class="token keyword">ReadOnly</span> <span class="token keyword">Property</span> PluginInfo <span class="token keyword">As</span> PluginInfo
 	<span class="token keyword">Get</span>
 		<span class="token keyword">Dim</span> info <span class="token keyword">As</span> PluginInfo <span class="token operator">=</span> <span class="token keyword">New</span> PluginInfo<span class="token punctuation">(</span><span class="token punctuation">)</span>
 		info.PackageId <span class="token operator">=</span> <span class="token string">&quot;com.jiegg.demo&quot;</span>
 		info.<span class="token keyword">Name</span> <span class="token operator">=</span> &quot;复读机&quot;
 		info.Version <span class="token operator">=</span> <span class="token keyword">New</span> Version<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
 		info.Author <span class="token operator">=</span> <span class="token string">&quot;JieGG&quot;</span>
 		info.Description <span class="token operator">=</span> &quot;QQMini插件教程插件 <span class="token punctuation">(</span>V3 插件机制<span class="token punctuation">)</span>&quot;
 		<span class="token keyword">Return</span> info
 	<span class="token keyword">End</span> <span class="token keyword">Get</span>
 <span class="token keyword">End</span> <span class="token keyword">Property</span>
</code></pre></div></details> <hr> <p>至此，QQMini.PluginSDK 的插件项目已经创建完毕。这时可以尝试编译项目，在编译时没有出现错误或警告即可。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Guide/Require/" class="prev">
        环境要求
      </a></span> <span class="next"><a href="/Guide/Code/">
        插件编写
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.73746a0f.js" defer></script><script src="/assets/js/2.36068e29.js" defer></script><script src="/assets/js/15.ba7e2a48.js" defer></script>
  </body>
</html>
