(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{376:function(t,s,a){"use strict";a.r(s);var n=a(45),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"项目搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目搭建"}},[t._v("#")]),t._v(" 项目搭建")]),t._v(" "),a("p",[t._v("本章节将叙述如何创建一个 QQMini插件")]),t._v(" "),a("h2",{attrs:{id:"插件信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件信息"}},[t._v("#")]),t._v(" 插件信息")]),t._v(" "),a("p",[t._v("在 QQMini插件 的V3机制中，我们采用了更完善的插件信息结构，用于插件区分、授权、开发者信息绑定以及插件商城(未来)。具体的插件信息模型见 "),a("a",{attrs:{href:""}},[t._v("插件模型")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("注释")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("PackageID")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("插件包ID，作为框架区分插件的唯一标识。应使用域名反写作为包ID。例: com.jiegg.demo")])]),t._v(" "),a("tr",[a("td",[t._v("Name")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("插件包ID，作为框架区分插件的唯一标识")])]),t._v(" "),a("tr",[a("td",[t._v("Version")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Version")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("插件版本，插件的唯一版本号，格式: 主板本号.次版本号.编译版本号.修订号")])]),t._v(" "),a("tr",[a("td",[t._v("Author")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("插件作者，作为显示在框架中插件作者的名字")])]),t._v(" "),a("tr",[a("td",[t._v("Description")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("插件说明，请写上插件的简要说明")])]),t._v(" "),a("tr",[a("td",[t._v("SDKVersion")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Int32")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("SDK版本，用于切换插件在框架中的运行机制")])]),t._v(" "),a("tr",[a("td",[t._v("DeveloperKey")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("开发人员序列号。该序列号会影响到插件部分Api或事件的使用。请勿随意修改，错误的序列号将导致插件被拒绝载入")])])])]),t._v(" "),a("h2",{attrs:{id:"步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤"}},[t._v("#")]),t._v(" 步骤")]),t._v(" "),a("p",[t._v("1.确定自己的插件的 PackageID，例如: com.jiegg.demo")]),t._v(" "),a("p",[t._v("2.打开 Visual Studio 创建类库项目")]),t._v(" "),a("p",[t._v("请搜索 “类库” 项目，并选择 类库(.NET Framework) 的项目进行创建\n"),a("img",{attrs:{src:"/setup/createProject01.png",alt:""}}),t._v("\n3.输入插件的 PackageID")]),t._v(" "),a("p",[t._v("修改项目名称为你的 PackageID。")]),t._v(" "),a("p",[t._v("注意： 如果项目名称与 PackageID 不一致，可能会导致编译结果无法被正常加载。\n"),a("img",{attrs:{src:"/setup/createProject02.png",alt:""}}),t._v("\n4.打开项目的 NuGet 管理")]),t._v(" "),a("p",[t._v('打开菜单 “工具” -> “NuGet包管理器” -> "管理解决方案的 NuGet 程序包"，打开之后勾选 “包括预发行版本”，在搜索框内搜索 “QQMini.PluginSDK”。选中之后将其安装到项目中\n'),a("img",{attrs:{src:"/setup/openNuGet.png",alt:""}}),t._v("\n5.配置 x86 生成模式")]),t._v(" "),a("p",[t._v("安装完NuGet程序包后，Visual Studio 可能会提示架构不匹配的警告信息，此时我们打开配置管理器，将项目的生成类型从 AnyCPU 改为 x86 即可消除该警告\n"),a("img",{attrs:{src:"/setup/openConfigManager.png",alt:""}}),t._v(" "),a("img",{attrs:{src:"/setup/changePlatform.png",alt:""}})]),t._v(" "),a("p",[t._v("6.打开 Class1.cs 修改成如下图代码来继承 PluginBase 类")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("QQMini"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PluginSDK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Core")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("QQMini"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PluginSDK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jiegg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("demo")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Class1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token type-list"}},[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PluginBase")])]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("details",[a("summary",[t._v("VB.NET")]),t._v(" "),a("div",{staticClass:"language-vbnet extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vbnet"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Imports")]),t._v(" QQMini.PluginSDK.Core\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Imports")]),t._v(" QQMini.PluginSDK.Core.Model\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Class")]),t._v(" Class1\n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Inherits")]),t._v(" PluginBase\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("End")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Class")]),t._v("\n")])])])]),t._v(" "),a("p",[t._v("7.使用 override 关键字重写 PluginInfo 属性并填写插件信息。有关插件信息的内容请到 "),a("a",{attrs:{href:""}},[t._v("插件信息")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[t._v("PluginInfo")]),t._v(" PluginInfo\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n \t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v("\n \t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n \t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PluginInfo")]),t._v(" info "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constructor-invocation class-name"}},[t._v("PluginInfo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \t\tinfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PackageId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.jiegg.demo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \t\tinfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"复读机"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \t\tinfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Version "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constructor-invocation class-name"}},[t._v("System"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Version")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \t\tinfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Author "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"JieGG"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \t\tinfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Description "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"QQMini插件教程插件 (V3 插件机制)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("details",[a("summary",[t._v("VB.NET")]),t._v(" "),a("div",{staticClass:"language-vbnet extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vbnet"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Overrides")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ReadOnly")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Property")]),t._v(" PluginInfo "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("As")]),t._v(" PluginInfo\n \t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Get")]),t._v("\n \t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Dim")]),t._v(" info "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("As")]),t._v(" PluginInfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("New")]),t._v(" PluginInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n \t\tinfo.PackageId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.jiegg.demo"')]),t._v("\n \t\tinfo."),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Name")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(' "复读机"\n \t\tinfo.Version '),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("New")]),t._v(" Version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n \t\tinfo.Author "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"JieGG"')]),t._v("\n \t\tinfo.Description "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(' "QQMini插件教程插件 '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("V3 插件机制"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v('"\n \t\t'),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Return")]),t._v(" info\n \t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("End")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Get")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("End")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Property")]),t._v("\n")])])])]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("至此，QQMini.PluginSDK 的插件项目已经创建完毕。这时可以尝试编译项目，在编译时没有出现错误或警告即可。")])])}),[],!1,null,null,null);s.default=e.exports}}]);